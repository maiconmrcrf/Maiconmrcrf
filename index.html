<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>YouTube Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5rem;
            background: linear-gradient(45deg, #FF0000, #FF4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .premium-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(45deg, #FF0000, #CC0000);
            color: white;
            text-decoration: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            margin: 20px 0;
            width: 100%;
            box-shadow: 0 10px 20px rgba(255,0,0,0.2);
        }
        
        .premium-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255,0,0,0.3);
            background: linear-gradient(45deg, #CC0000, #990000);
        }
        
        .premium-btn i {
            font-size: 1.5rem;
        }
        
        .instructions {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: left;
            border-left: 5px solid #FF0000;
        }
        
        .instructions h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions ol {
            padding-left: 20px;
            color: #555;
            line-height: 1.8;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 10px;
            color: #0066cc;
            font-size: 0.9rem;
            display: none;
        }
        
        .detected-video {
            margin-top: 20px;
            padding: 15px;
            background: #d4edda;
            border-radius: 10px;
            color: #155724;
            font-size: 0.9rem;
            display: none;
        }
        
        .logo {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #FF0000, #FF4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="logo">‚ñ∂Ô∏è</div>
    <h1>YouTube Premium</h1>
    <p class="subtitle">Experi√™ncia de v√≠deo aprimorada</p>
    
    <a href="https://m.youtube.com" class="premium-btn" target="_blank" id="youtubeLink">
        <span>üé¨</span> ABRIR YOUTUBE PREMIUM
    </a>
    
    <div class="status" id="status">
        <strong>Status:</strong> Aguardando detec√ß√£o de v√≠deo...
    </div>
    
    <div class="detected-video" id="detectedVideo">
        <strong>üéâ V√≠deo detectado!</strong><br>
        <span id="videoInfo">Redirecionando para vers√£o premium...</span>
    </div>
    
    <div class="instructions">
        <h3><span>‚ö°</span> Como funciona:</h3>
        <ol>
            <li><strong>Clique em "ABRIR YOUTUBE PREMIUM" acima</strong></li>
            <li><strong>Navegue normalmente</strong> no YouTube</li>
            <li><strong>Clique em QUALQUER v√≠deo</strong> que quiser assistir</li>
            <li><strong>Automaticamente</strong> ser√° aberto em nova aba com qualidade premium</li>
        </ol>
        <p style="margin-top: 15px; font-style: italic; color: #666;">
            ‚ú® N√£o precisa copiar links, n√£o precisa fazer nada manualmente!
        </p>
    </div>
</div>

<script>
// Elementos da p√°gina
const statusEl = document.getElementById('status');
const detectedEl = document.getElementById('detectedVideo');
const videoInfoEl = document.getElementById('videoInfo');

// Vari√°veis
let isDetecting = false;
let youtubeWindow = null;

// Atualiza status
function updateStatus(message, type = 'info') {
    statusEl.style.display = 'block';
    statusEl.textContent = `Status: ${message}`;
    
    if (type === 'success') {
        statusEl.style.background = '#d4edda';
        statusEl.style.color = '#155724';
    } else if (type === 'error') {
        statusEl.style.background = '#f8d7da';
        statusEl.style.color = '#721c24';
    } else {
        statusEl.style.background = '#e8f4fd';
        statusEl.style.color = '#0066cc';
    }
}

// Mostra v√≠deo detectado
function showDetectedVideo(videoId, newUrl) {
    detectedEl.style.display = 'block';
    videoInfoEl.innerHTML = `
        ID do v√≠deo: <code>${videoId}</code><br>
        <small>Abrindo: ${newUrl}</small>
    `;
    
    // Esconde ap√≥s 5 segundos
    setTimeout(() => {
        detectedEl.style.display = 'none';
    }, 5000);
}

// Extrai ID do v√≠deo de qualquer URL do YouTube
function extractVideoId(url) {
    try {
        // Tenta como URL completa
        if (url.includes('youtube.com/watch') || url.includes('youtu.be/')) {
            const urlObj = new URL(url);
            const videoId = urlObj.searchParams.get('v') || 
                           url.pathname.replace('/', ''); // Para youtu.be/ID
            
            if (videoId && videoId.length >= 11) {
                return videoId.substring(0, 11); // IDs do YouTube t√™m 11 caracteres
            }
        }
        
        // Regex para v√°rios formatos de URL do YouTube
        const patterns = [
            /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
            /v=([a-zA-Z0-9_-]{11})/,
            /\/watch\/([a-zA-Z0-9_-]{11})/,
            /\/([a-zA-Z0-9_-]{11})(?:\?|$)/ // Captura ID no final da URL
        ];
        
        for (const pattern of patterns) {
            const match = url.match(pattern);
            if (match && match[1]) {
                return match[1];
            }
        }
        
        return null;
    } catch (e) {
        return null;
    }
}

// Processa quando um v√≠deo √© detectado
function processVideoDetection(videoId) {
    if (!videoId) return;
    
    // Cria o link editado COM TRA√áO
    const newUrl = `https://m.yout-ube.com/watch?v=${videoId}`;
    
    // Mostra na interface
    showDetectedVideo(videoId, newUrl);
    updateStatus(`V√≠deo detectado! Redirecionando...`, 'success');
    
    // Abre AUTOMATICAMENTE em nova aba
    window.open(newUrl, '_blank');
    
    console.log(`üé¨ V√≠deo detectado: ${videoId}`);
    console.log(`üîó Redirecionando para: ${newUrl}`);
}

// ==================== DETEC√á√ÉO AUTOM√ÅTICA INTELIGENTE ====================

// M√âTODO 1: Monitoramento por MutationObserver (detecta mudan√ßas na p√°gina)
function startPageMonitoring() {
    if (isDetecting) return;
    isDetecting = true;
    
    updateStatus('Monitoramento ativo...');
    
    // Monitora mudan√ßas no t√≠tulo da p√°gina (YouTube muda t√≠tulo quando v√≠deo carrega)
    let lastTitle = document.title;
    
    const titleObserver = new MutationObserver(() => {
        if (document.title !== lastTitle) {
            lastTitle = document.title;
            
            // Verifica se o t√≠tulo cont√©m " - YouTube" (padr√£o do YouTube)
            if (document.title.includes(' - YouTube') || 
                document.title.includes('(v√≠deo)')) {
                
                // Tenta extrair informa√ß√µes da URL atual
                const currentUrl = window.location.href;
                const videoId = extractVideoId(currentUrl);
                
                if (videoId) {
                    processVideoDetection(videoId);
                }
            }
        }
    });
    
    titleObserver.observe(document.querySelector('title'), {
        childList: true,
        subtree: true,
        characterData: true
    });
    
    // Monitora mudan√ßas na URL (para SPAs como YouTube)
    let lastUrl = window.location.href;
    
    setInterval(() => {
        if (window.location.href !== lastUrl) {
            lastUrl = window.location.href;
            
            // Verifica se √© uma URL de v√≠deo do YouTube
            if (lastUrl.includes('youtube.com/watch')) {
                const videoId = extractVideoId(lastUrl);
                if (videoId) {
                    processVideoDetection(videoId);
                }
            }
        }
    }, 1000);
    
    // Monitora cliques em links (captura antes de navegar)
    document.addEventListener('click', function(e) {
        let target = e.target;
        
        // Encontra o link mais pr√≥ximo
        while (target && target.tagName !== 'A') {
            target = target.parentElement;
        }
        
        if (target && target.href) {
            // Verifica se √© link de v√≠deo do YouTube
            if (target.href.includes('youtube.com/watch') || 
                target.href.includes('youtu.be/')) {
                
                e.preventDefault();
                e.stopPropagation();
                
                const videoId = extractVideoId(target.href);
                if (videoId) {
                    processVideoDetection(videoId);
                    
                    // Abre o link original em background (se quiser)
                    setTimeout(() => {
                        window.open(target.href, '_blank');
                    }, 500);
                }
                
                return false;
            }
        }
    }, true); // Captura na fase de captura (antes do bubble)
}

// M√âTODO 2: Detec√ß√£o por EventListener global (cross-window)
function setupGlobalDetection() {
    // Quando o bot√£o do YouTube √© clicado
    document.getElementById('youtubeLink').addEventListener('click', function(e) {
        e.preventDefault();
        
        updateStatus('Abrindo YouTube...');
        
        // Abre o YouTube em nova janela
        youtubeWindow = window.open(
            'https://m.youtube.com',
            'YouTubePremium',
            'width=1200,height=700,left=100,top=100'
        );
        
        // Tenta injetar script de detec√ß√£o na janela do YouTube
        setTimeout(() => {
            if (youtubeWindow) {
                try {
                    // Injetar script na janela do YouTube
                    const injectionCode = `
                        // Script injetado no YouTube
                        console.log('üé¨ YouTube Premium Detector ativo!');
                        
                        // Detecta cliques em v√≠deos
                        document.addEventListener('click', function(e) {
                            let link = e.target.closest('a');
                            if (link && link.href && 
                                (link.href.includes('/watch') || link.href.includes('/shorts'))) {
                                
                                // Envia mensagem para a janela principal
                                window.opener.postMessage({
                                    type: 'YOUTUBE_VIDEO_CLICK',
                                    url: link.href
                                }, '*');
                                
                                // Previne a navega√ß√£o normal (opcional)
                                e.preventDefault();
                            }
                        }, true);
                        
                        // Detecta mudan√ßas na URL (para SPAs)
                        let lastYoutubeUrl = location.href;
                        setInterval(() => {
                            if (location.href !== lastYoutubeUrl && 
                                location.href.includes('/watch')) {
                                lastYoutubeUrl = location.href;
                                
                                window.opener.postMessage({
                                    type: 'YOUTUBE_URL_CHANGE',
                                    url: location.href
                                }, '*');
                            }
                        }, 1000);
                    `;
                    
                    youtubeWindow.eval(injectionCode);
                    updateStatus('YouTube aberto! Clique em qualquer v√≠deo...', 'success');
                    
                } catch (error) {
                    console.log('N√£o foi poss√≠vel injetar script, usando m√©todo alternativo');
                    updateStatus('YouTube aberto. Clique em v√≠deos normalmente.', 'info');
                }
            }
        }, 2000);
        
        // Abre tamb√©m o link original
        setTimeout(() => {
            window.open(this.href, '_blank');
        }, 100);
    });
}

// M√âTODO 3: Escuta mensagens da janela do YouTube
window.addEventListener('message', function(e) {
    // Verifica se a mensagem √© do nosso detector
    if (e.data && (e.data.type === 'YOUTUBE_VIDEO_CLICK' || 
                   e.data.type === 'YOUTUBE_URL_CHANGE')) {
        
        const videoId = extractVideoId(e.data.url);
        if (videoId) {
            processVideoDetection(videoId);
        }
    }
});

// M√âTODO 4: Monitoramento simples para esta p√°gina
function startSimpleDetection() {
    // Se j√° estiver em uma p√°gina de v√≠deo do YouTube
    if (window.location.href.includes('youtube.com/watch')) {
        const videoId = extractVideoId(window.location.href);
        if (videoId) {
            processVideoDetection(videoId);
        }
    }
    
    // Monitora a URL desta p√°gina
    let currentUrl = window.location.href;
    setInterval(() => {
        if (window.location.href !== currentUrl) {
            currentUrl = window.location.href;
            
            if (currentUrl.includes('youtube.com/watch')) {
                const videoId = extractVideoId(currentUrl);
                if (videoId) {
                    processVideoDetection(videoId);
                }
            }
        }
    }, 500);
}

// ==================== INICIALIZA√á√ÉO ====================

// Quando a p√°gina carrega
document.addEventListener('DOMContentLoaded', function() {
    updateStatus('Sistema Premium pronto! Clique no bot√£o acima.', 'info');
    
    // Inicia todos os m√©todos de detec√ß√£o
    setupGlobalDetection();
    startPageMonitoring();
    startSimpleDetection();
    
    console.log(`
    ====================================
    üé¨ YOUTUBE PREMIUM DETECTOR
    ====================================
    Sistema ativo! Clique em "ABRIR YOUTUBE PREMIUM"
    e depois clique em QUALQUER v√≠deo no YouTube.
    
    O sistema detectar√° automaticamente e abrir√°
    em nova aba com link premium!
    ====================================
    `);
});

// Adiciona √≠cone din√¢mico
const style = document.createElement('style');
style.textContent = `
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }
    
    .detecting {
        animation: pulse 2s infinite;
        background: linear-gradient(45deg, #00FF00, #00CC00) !important;
    }
`;
document.head.appendChild(style);

</script>

</body>
</html>
