<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RIFA BRASIL - Sorteios</title>
  <script>
    const config = {
      premiumValue: 100,
      ticketValue: 5,
      winningNumber: null,
      reservedGroups: "[1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [15] [16] [17] [18] [19] [20] [21] [22] [23] [24] [25]",
      pixKey: "71987515593. Maicon Barbosa Gabriel",
      whatsappNumber: "5571987515593"
    };

    const animals = [
      "AVESTRUZ", "√ÅGUIA", "BURRO", "BORBOLETA", "CACHORRO",
      "CABRA", "CARNEIRO", "CAMELO", "COBRA", "COELHO",
      "CAVALO", "ELEFANTE", "GALO", "GATO", "JACAR√â",
      "LE√ÉO", "MACACO", "PORCO", "PAV√ÉO", "PERU",
      "TOURO", "TIGRE", "URSO", "VEADO", "VACA"
    ];

    let selectedGroup = null;
    let generatedId = null;
  </script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;-webkit-tap-highlight-color:transparent;}
    body{background:linear-gradient(135deg,#0d47a1,#1565c0,#1e88e5);min-height:100vh;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;}
    .container{width:100%;max-width:500px;background:#eceff1;border-radius:15px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,0.2);overflow:hidden;position:relative;}
    .container::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(90deg,#0d47a1,#1565c0,#1e88e5);}
    .header{text-align:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #cfd8dc;}
    h1{color:#0d47a1;margin-bottom:8px;font-size:24px;text-transform:uppercase;letter-spacing:1px;text-shadow:1px 1px 2px rgba(0,0,0,0.1);}
    .header p{color:#1565c0;font-weight:600;font-size:16px;}
    .welcome-message{background:linear-gradient(to right,#cfd8dc,#b0bec5);padding:15px;border-radius:10px;margin-bottom:20px;font-size:15px;line-height:1.5;border-left:5px solid #0d47a1;text-align:center;box-shadow:0 4px 8px rgba(0,0,0,0.05);position:relative;}
    .welcome-message p{margin:0;color:#263238;}
    .last-winner-btn{display:inline-block;margin-top:10px;padding:8px 15px;background:linear-gradient(to bottom,#1565c0,#0d47a1);color:white;border:none;border-radius:20px;font-weight:bold;cursor:pointer;transition:all 0.3s;font-size:14px;box-shadow:0 3px 5px rgba(0,0,0,0.2);}
    .last-winner-btn:hover{background:linear-gradient(to bottom,#0d47a1,#0b3c91);transform:translateY(-2px);box-shadow:0 5px 8px rgba(0,0,0,0.3);}
    .prize-info{background:linear-gradient(to right,#eceff1,#cfd8dc);padding:15px;border-radius:10px;margin-bottom:20px;text-align:center;border:2px dashed #1565c0;position:relative;overflow:hidden;}
    .prize-info::before{content:'üéØ';position:absolute;top:-10px;left:-10px;font-size:20px;opacity:0.2;}
    .prize-info::after{content:'üí∞';position:absolute;bottom:-10px;right:-10px;font-size:20px;opacity:0.2;}
    .prize-info h2{color:#0d47a1;margin-bottom:8px;font-size:22px;}
    .prize-info p{color:#1565c0;font-weight:600;font-size:16px;}
    .blocks-container{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px;}
    .block{background:linear-gradient(to bottom,#cfd8dc,#b0bec5);border:2px solid #1565c0;border-radius:8px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:12px 5px;min-height:80px;transition:all 0.3s ease;cursor:pointer;position:relative;overflow:hidden;}
    .block::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:#1565c0;opacity:0.3;}
    .block:hover{transform:translateY(-5px) scale(1.03);box-shadow:0 8px 15px rgba(0,0,0,0.1);}
    .block-numbers{font-size:15px;font-weight:bold;margin-bottom:5px;text-align:center;color:#0d47a1;}
    .block-animal{font-size:12px;text-align:center;font-weight:600;color:#1565c0;}
    .block.reserved{background:#e53935;color:#fff;border-color:#b71c1c;cursor:not-allowed;}
    .block.winner{background:linear-gradient(to bottom,#81c784,#66bb6a);color:#1b5e20;border-color:#1b5e20;box-shadow:0 0 15px rgba(27,94,32,0.5);animation:pulse 2s infinite;}
    @keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);}}
    .winner-section{background:linear-gradient(to right,#cfd8dc,#b0bec5);padding:15px;border-radius:10px;margin-top:20px;text-align:center;border-left:5px solid #1565c0;box-shadow:0 4px 8px rgba(0,0,0,0.08);}
    .winner-section h3{color:#0d47a1;margin-bottom:10px;font-size:18px;}
    .confirmation-section{margin-top:25px;padding:20px;background:linear-gradient(to right,#90a4ae,#78909c);border-radius:10px;border-left:5px solid #0d47a1;display:none;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
    .confirmation-message{margin-bottom:20px;font-weight:bold;color:#263238;font-size:16px;line-height:1.4;}
    .confirmation-buttons{display:flex;gap:15px;justify-content:center;}
    .btn{padding:12px 25px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;transition:all 0.3s;font-size:16px;min-width:100px;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
    .btn-yes{background:linear-gradient(to bottom,#0d47a1,#1565c0);color:white;}
    .btn-yes:hover{background:linear-gradient(to bottom,#1565c0,#0d47a1);transform:translateY(-2px);box-shadow:0 6px 8px rgba(0,0,0,0.15);}
    .btn-no{background:linear-gradient(to bottom,#1e88e5,#1565c0);color:white;}
    .btn-no:hover{background:linear-gradient(to bottom,#1565c0,#0d47a1);transform:translateY(-2px);box-shadow:0 6px 8px rgba(0,0,0,0.15);}
    .no-winner{font-style:italic;color:#546e7a;font-size:16px;}
    #winnerNumber{font-size:18px;color:#0d47a1;font-weight:bold;}
    .footer-note{text-align:center;margin-top:20px;color:white;font-size:14px;text-shadow:1px 1px 2px rgba(0,0,0,0.5);}
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.8);z-index:1000;justify-content:center;align-items:center;}
    .modal-content{background-color:white;padding:20px;border-radius:10px;max-width:90%;max-height:90%;text-align:center;}
    .modal-img{max-width:100%;max-height:70vh;border-radius:5px;}
    .close-modal{margin-top:15px;padding:8px 15px;background:linear-gradient(to bottom,#1e88e5,#1565c0);color:white;border:none;border-radius:5px;cursor:pointer;}
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>RIFA RESPONS√ÅVEL MAICON</h1>
    <p>SORTEIO RESULTADO BAHIA 19:00 ASSIM QUE ENCHER</p>
  </div>
  
  <div class="welcome-message">
    <p><strong>Seja bem-vindo!</strong> Clique no grupo que deseja e em seguida escolha SIM ou N√ÉO para enviar e deixar reservado aqui na p√°gina. Obrigado a todos pela contribui√ß√£o!</p>
    <button class="last-winner-btn" id="showWinnerBtn">Clique aqui para ver o √∫ltimo ganhador</button>
  </div>
  
  <div class="prize-info">
    <h2>Pr√™mio: R$ <span id="premiumValue"></span>,00</h2>
    <p>Valor por cota: R$ <span id="ticketValue"></span>,00</p>
  </div>
  
  <div class="blocks-container" id="blocksContainer"></div>
  
  <div class="winner-section">
    <h3>N√∫mero Sorteado</h3>
    <p><strong id="winnerNumber" class="no-winner">Aguardando sorteio...</strong></p>
  </div>
  
  <div class="confirmation-section" id="confirmationSection">
    <div class="confirmation-message" id="confirmationMessage"></div>
    <div class="confirmation-buttons">
      <button class="btn btn-yes" id="btnYes">Sim</button>
      <button class="btn btn-no" id="btnNo">N√£o</button>
    </div>
  </div>
</div>

<div class="modal" id="winnerModal">
  <div class="modal-content">
    <h2>√öltimo Ganhador</h2>
    <img class="modal-img" src="https://i.ibb.co/2xzJH6f/Picsart-25-08-24-14-33-04-951.jpg" alt="√öltimo ganhador da rifa">
    <button class="close-modal" id="closeModal">Fechar</button>
  </div>
</div>

<div class="footer-note">
  RIFA BRASIL ¬© 2025 - Todos os direitos reservados
</div>

<script>
function init() {
  document.getElementById("premiumValue").textContent = config.premiumValue;
  document.getElementById("ticketValue").textContent = config.ticketValue;
  generateBlocks();
  updateWinnerDisplay();
  document.getElementById("btnYes").addEventListener("click", confirmSelection);
  document.getElementById("btnNo").addEventListener("click", cancelSelection);
  document.getElementById("showWinnerBtn").addEventListener("click", showWinner);
  document.getElementById("closeModal").addEventListener("click", closeWinnerModal);
}

function parseReservedGroups(reservedString) {
  const reservedArray = [];
  const regex = /\[([^\]]*\.?[^\]]*)\]/g;
  let match;
  while ((match = regex.exec(reservedString)) !== null) {
    const content = match[1];
    if (content.includes('.')) {
      const numberMatch = content.match(/\d+/);
      if (numberMatch) {
        const number = parseInt(numberMatch[0]);
        if (!isNaN(number) && number >= 1 && number <= 25) reservedArray.push(number);
      }
    }
  }
  return reservedArray;
}

function generateBlocks() {
  const container = document.getElementById("blocksContainer");
  container.innerHTML = "";
  const reservedGroups = parseReservedGroups(config.reservedGroups);

  for (let i = 1; i <= 25; i++) {
    const block = document.createElement("div");
    block.className = "block";
    block.dataset.block = i;

    const startNum = (i - 1) * 4 + 1;
    const numbers = [];
    for (let j = 0; j < 4; j++) {
      let num = startNum + j;
      if (num > 100) num = num - 100;
      if (num === 100) num = 0;
      numbers.push(num.toString().padStart(2,"0"));
    }

    block.innerHTML = `<div class="block-numbers">${numbers.join("-")}</div><div class="block-animal">${animals[i-1]}</div>`;

    if (reservedGroups.includes(i)) block.classList.add("reserved");
    else block.addEventListener("click", ()=>{selectedGroup=i;generatedId=generateRandomId();showConfirmation(i,animals[i-1],numbers.join(", "),generatedId);});

    if (config.winningNumber!==null && config.winningNumber!=="") {
      let winningNumber = config.winningNumber===0?100:config.winningNumber;
      let groupNumber = winningNumber%4===0?winningNumber/4:Math.ceil(winningNumber/4);
      if (winningNumber===100) groupNumber=25;
      if (i===groupNumber) {block.classList.add("winner");block.classList.remove("reserved");}
    }
    container.appendChild(block);
  }
}

function showConfirmation(groupNumber, animalName, numbers, id) {
  const msg=`Tem certeza que deseja reservar o grupo ${groupNumber} (${animalName}) com os n√∫meros ${numbers}? Seu ID de confirma√ß√£o √©: ${id}`;
  document.getElementById("confirmationMessage").textContent=msg;
  document.getElementById("confirmationSection").style.display="block";
  document.getElementById("confirmationSection").scrollIntoView({behavior:"smooth"});
}

function confirmSelection() {
  if (selectedGroup && generatedId) {
    const numbers = getNumbersForGroup(selectedGroup);
    const animalName = animals[selectedGroup-1];
    const idText=`GRUPO-${selectedGroup}-${animalName}-${generatedId}`;
    navigator.clipboard.writeText(idText);
    const message=encodeURIComponent(`Ol√°, gostaria de reservar o grupo ${selectedGroup} (${animalName})\nMeu ID de confirma√ß√£o √©: ${idText}\n\nChave PIX para pagamento:\n${config.pixKey}\n\naguardando o comprovante üôè acompanhe site aqui https://rifadodia.github.io/RIFADODIA/.`);
    window.open(`https://wa.me/${config.whatsappNumber}?text=${message}`,'_blank');
    document.getElementById("confirmationSection").style.display="none";
    selectedGroup=null;
    generatedId=null;
  }
}

function cancelSelection(){document.getElementById("confirmationSection").style.display="none";selectedGroup=null;generatedId=null;}

function getNumbersForGroup(groupNumber){
  const startNum=(groupNumber-1)*4+1;
  const numbers=[];
  for(let j=0;j<4;j++){
    let num=startNum+j;if(num>100)num=num-100;if(num===100)num=0;numbers.push(num.toString().padStart(2,"0"));
  }
  return numbers.join(", ");
}

function updateWinnerDisplay(){
  const winnerElement=document.getElementById("winnerNumber");
  if(config.winningNumber===null||config.winningNumber===""){winnerElement.textContent="Aguardando sorteio...";winnerElement.className="no-winner";return;}
  let winningNumber=config.winningNumber===0?100:config.winningNumber;
  let groupNumber=winningNumber%4===0?winningNumber/4:Math.ceil(winningNumber/4);
  if(winningNumber===100)groupNumber=25;
  const animalIndex=groupNumber>0&&groupNumber<=25?groupNumber-1:0;
  const displayNumber=config.winningNumber===0?"00":config.winningNumber.toString().padStart(2,"0");
  winnerElement.textContent=`${displayNumber} - ${animals[animalIndex]}`;
  winnerElement.className="";
}

function generateRandomId(length=6){const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let result="";for(let i=0;i<length;i++){result+=chars.charAt(Math.floor(Math.random()*chars.length));}return result;}

function showWinner(){document.getElementById('winnerModal').style.display='flex';}
function closeWinnerModal(){document.getElementById('winnerModal').style.display='none';}

document.addEventListener("DOMContentLoaded", init);
</script>
</body>
</html>